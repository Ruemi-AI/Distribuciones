<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Helper</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            height: 100vh;
            background-image: url(fondo.jpeg); /* Cambia la URL por la de tu imagen */
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            overflow: auto; /* Habilitar scroll si el contenido excede el tamaño de la ventana */
        }

        h1 {
            font-size: 4em; /* Aumenté el tamaño del texto */
            text-align: center;
            margin: 0;
            position: relative;
            z-index: 10;
            margin-bottom: 50px; /* Añadí margen para separarlo de los botones */
        }

        .buttons {
            display: flex;
            gap: 20px;
            z-index: 10;
        }

        button {
            background-color: #008CBA;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.5em; /* Aumenté el tamaño de las letras en los botones */
            cursor: pointer;
            border-radius: 10px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #005f73;
        }

        #menu-toggle {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 2em;
            cursor: pointer;
            z-index: 20;
        }

        .menu {
            position: absolute;
            top: 0;
            left: -300px; /* Aumenté el ancho del menú */
            width: 300px; /* Aumenté el ancho del menú */
            background-color: #333;
            height: 100%;
            transition: left 0.3s;
            padding: 30px; /* Aumenté el padding */
            color: white;
            z-index: 15;
            overflow-y: auto; /* Permitir desplazamiento dentro del menú */
        }

        .menu.open {
            left: 0; /* Muestra el menú cuando está abierto */
        }

        .menu a {
            display: block;
            color: white;
            text-decoration: none;
            margin: 30px 0; /* Aumenté el margen entre los enlaces */
            font-size: 1.5em; /* Aumenté el tamaño de las letras en el menú */
        }

        .menu a:hover {
            color: #008CBA;
        }

        #map {
            width: 100%;
            height: 500px; /* Aumenté la altura del mapa */
        }

        #calculadora {
            display: none;
            margin-top: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 30px; /* Aumenté el padding */
            border-radius: 10px;
            width: 80%; /* Aumenté el ancho de la calculadora */
            max-width: 600px; /* Limité el ancho máximo */
            margin-left: auto;
            margin-right: auto;
            overflow-y: auto; /* Permitir desplazamiento en la calculadora */
            max-height: 80vh; /* Limité la altura máxima */
        }

        .input-group {
            margin-bottom: 20px; /* Aumenté el margen inferior de los inputs */
        }

        .volver-btn {
            background-color: #d9534f;
            color: white;
            border: none;
            padding: 15px 30px; /* Aumenté el padding */
            font-size: 1.5em; /* Aumenté el tamaño de las letras en el botón de volver */
            cursor: pointer;
            border-radius: 10px;
            margin-bottom: 20px;
            transition: background-color 0.3s;
        }

        .volver-btn:hover {
            background-color: #c9302c;
        }

        #climaDatos {
            margin-top: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
            overflow-y: auto; /* Permitir desplazamiento si el contenido es largo */
        }
    </style>
</head>
<body>
    <div id="menu-toggle" onclick="toggleMenu()">
        <i class="fas fa-bars"></i> <!-- Icono para abrir el menú -->
    </div>

    <h1>Solar Helper</h1> <!-- El nombre ahora está centrado justo encima de los botones -->

    <div class="buttons">
        <button onclick="mostrarCalculadora()">Abrir Calculadora</button>
        <button onclick="abrirComparador()">Comparar Paneles</button>
    </div>

    <!-- Menu lateral -->
    <div class="menu" id="menu">
        <a href="#" onclick="mostrarConsejos()">Guía de Instalación</a>
        <a href="#">Consejos Útiles</a>
        <button class="volver-btn" onclick="volverInicio()">Volver al inicio</button>
    </div>

    <!-- Calculadora -->
    <div id="calculadora">
        <button class="volver-btn" onclick="volverInicio()">Volver al inicio</button>
        <div id="map"></div>
        <div class="input-group">
            <label for="consumo">Consumo mensual (kWh):</label>
            <input type="number" id="consumo" placeholder="Ej. 300">
        </div>
        <div class="input-group">
            <label for="horasSol">Horas de sol diarias:</label>
            <input type="number" id="horasSol" placeholder="Ej. 5">
        </div>
        <button onclick="calcularPanel()">Calcular Panel</button>

        <!-- Datos del clima solo dentro del menú de la calculadora -->
        <div id="climaDatos">
            <h3>Datos Climáticos</h3>
            <p id="descripcionClima"></p>
            <p id="temperatura"></p>
            <p id="humedad"></p>
            <p id="viento"></p>
            <p id="presion"></p>
            <p id="radiacionSolar"></p>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Función para abrir y cerrar el menú lateral
        function toggleMenu() {
            const menu = document.getElementById('menu');
            menu.classList.toggle('open');
        }

        // Función para mostrar la calculadora
        function mostrarCalculadora() {
            document.getElementById('calculadora').style.display = 'block';
            document.querySelector('.buttons').style.display = 'none';
            inicializarMapa();
        }

        // Función para abrir el comparador de paneles
        function abrirComparador() {
            alert('Aquí iría la página para comparar paneles solares.');
        }

        // Inicializar mapa
        let map, marker;
        function inicializarMapa() {
            map = L.map('map').setView([20.67, -103.35], 6); // Coordenadas de México como ejemplo

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            map.on('click', function (e) {
                obtenerClima(e.latlng.lat, e.latlng.lng);
                if (marker) {
                    marker.setLatLng(e.latlng);
                } else {
                    marker = L.marker(e.latlng).addTo(map);
                }
            });
        }

        // Obtener clima de OpenWeatherMap
        function obtenerClima(lat, lon) {
            const API_KEY = '885e9358b328cc94d3dddb0c61c425bd';
            const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=es`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    mostrarDatosClimaticos(data);  // Llamada a la función para mostrar los datos
                })
                .catch(error => console.error('Error al obtener el clima:', error));
        }

        // Mostrar los datos en el HTML
        function mostrarDatosClimaticos(data) {
            document.getElementById('descripcionClima').innerText = `Descripción: ${data.weather[0].description}`;
            document.getElementById('temperatura').innerText = `Temperatura: ${data.main.temp}°C`;
            document.getElementById('humedad').innerText = `Humedad: ${data.main.humidity}%`;
            document.getElementById('viento').innerText = `Velocidad del viento: ${data.wind.speed} m/s`;
            document.getElementById('presion').innerText = `Presión atmosférica: ${data.main.pressure} hPa`;
            document.getElementById('radiacionSolar').innerText = `Radiación solar: Información no disponible`;
        }

        // Función para calcular el tipo de panel
        function calcularPanel() {
            const consumo = document.getElementById('consumo').value;
            const horasSol = document.getElementById('horasSol').value;
            const consumoMensual = consumo * 30; // Aproximación mensual
            const energiaDiaria = consumoMensual / horasSol;
            alert(`Necesitas un panel con potencia mínima de: ${energiaDiaria.toFixed(2)} kW.`);
        }

        // Función para mostrar consejos sobre la instalación
        function mostrarConsejos() {
            alert('Aquí irían los consejos sobre la instalación de paneles solares.');
        }

        // Función para regresar al inicio
        function volverInicio() {
            document.getElementById('calculadora').style.display = 'none';
            document.querySelector('.buttons').style.display = 'flex';
            document.getElementById('menu').classList.remove('open');
        }
    </script>
</body>
</html>
